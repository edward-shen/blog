<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Jekyll Plugin: Github Cards</title>
  <meta name="description" content="I need to make a confession: I finished the magic mirror back in mid-August. I’ll be posting the final update to my mirror whenever I have time (as you can s...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://0.0.0.0:4000/17/10/github-cards">
  <link rel="alternate" type="application/rss+xml" title="Anonymous Lambda" href="/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Quicksand:300" rel="stylesheet">
  <script src="/assets/ghcards-update.js" type = "text/javascript"></script>

  
</head>

    
    <body>
        <header>
    <a href="/">
        <img src="/assets/logo.png" />
        <h1>Anonymous Lambda</h1>
    </a>
</header>

        
            <main aria-label="Content">
            <aside>
    <h3>Hello.</h3>
    <img src="/assets/avatar.png" />
    <h4>Edward Shen</h4>
    <p>
        I'm a student at Northeastern University majoring in CS. I post and record my projects here.
    </p>
     
    <a href="/about">About</a>   
    <br />
    <a href="https://github.com/edward-shen" class="social"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
<span class="username">edward-shen</span></a>

    <a href="https://twitter.com/_EdwardShen" class="social"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
<span class="username">_EdwardShen</span></a>

    <p class="rss-subscribe">Subscribe via <a href="/feed.xml">RSS</a>.</p>
</aside>

            
            <article>
            <h1>Jekyll Plugin: Github Cards</h1>
<span>Oct 12 2017 •  

    14
 minute
 read</span>
<p>I need to make a confession: I finished the magic mirror back in mid-August. I’ll be posting the final update to my mirror whenever I have time (as you can see I am <em>terrible</em> with this concept of blogging), but for now I want to write a post-mortem, to say, of the Jekyll plugin I just made:</p>

<section class="gh-cards">

      <article class="gh-card" data-username="edward-shen" data-repo="github-cards">
        <section class="gh-card-top">
          <a href="https://github.com/edward-shen"><img class="gh-card-avatar" src="https://avatars1.githubusercontent.com/u/6173958?v=4" alt="User icon" /></a>
          <section class="gh-card-info">
            <a href="https://github.com/edward-shen/github-cards"><h4>github-cards</h4></a>
            <div class="gh-card-details">
              <p>Created by <a href="https://github.com/edward-shen">edward-shen</a></p>
              <p>Last updated on <a href="https://github.com/edward-shen/github-cards/commits/master">2017-10-23</a>
              </p>
            </div>
          </section>
          
      <section class="gh-card-lang">
        <p class="text-grey">Ruby</p>
        <svg aria-hidden="true" version="1.1" viewBox="0 0 14 16">
          <circle cx="7" cy="7" r="7" fill="#701516" />
        </svg>
      </section>
        </section>

        <p class="gh-card-desc">Generates your Github projects in HTML for your (static) website to use from a predefined template.</p>

        <section class="gh-card-bottom text-grey">
          <svg aria-hidden="true" version="1.1" viewBox="0 0 14 16">
            <path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z" />
          </svg>
          <p class="star-count">0</p>
          <svg aria-hidden="true" version="1.1" viewBox="0 0 10 16">
            <path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z" />
          </svg>
          <p class="fork-count">0</p>
        </section>
      </article>

</section>

<p>If you’re wondering what it does, congratulations, you just saw what it does! It’s an easy-to-style github card liquid tag! I can easily call a bunch of cards, or a single card, depending on what params I put in.</p>

<p>For example, the one you just saw was the following on my end:</p>
<div class="language-liquid highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="p">{%</span><span class="w"> </span><span class="nt">ghcards</span><span class="w"> </span>github-cards<span class="w"> </span><span class="p">%}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>I can also call up to 30 (but seriously, who needs more than 30?) repos at a time just by saying the following:</p>
<div class="language-liquid highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="p">{%</span><span class="w"> </span><span class="nt">ghcards</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="p">%}</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>Or, if I don’t want to use my own repos, just pass in the author:</p>
<div class="language-liquid highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="p">{%</span><span class="w"> </span><span class="nt">ghcards</span><span class="w"> </span>jekyll<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">%}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>It uses Github’s new APIv4 that utilizes GraphQL, a relatively novel API format by Facebook. I personally think it’s a strong contender to replace API calls for many larger organizations, since, when specififed correctly, lightens the load for both the server and the client.</p>

<p>On the user side (that is, the people who view this blog), they’ll have a small JS that will pull and cache the latest stars and forks from Github, so they’ll see the latest data, even when the last time the website was regenerated was 20 years ago.</p>

<p>I personally will be using this in the future, and I hope many come to adopt it as well.</p>

<h2 id="what-went-right">What went right</h2>

<h3 id="1-graphql">1. GraphQL</h3>

<p>GraphQL was an absolute breeze to work with. I loved the concept getting everything I wanted and <em>only</em> the things I wanted, rather that getting everything and then discarding the unnecessary parts. It’s cleaner code, lighter on the network, and best of all, it feels elegant. GraphQL seems like a natural progression from a clunkly API protocol (aka JSON via RESTful calls) to a streamlined and optimized solution. I simply don’t want to go back. I’ve experienced hell when an single api call (read: the only api call) returns literally everything you need to know, everything you don’t need to know, and <em>then</em> some. Filtering, parsing JSON, debugging, and more all took so much time out of development to just figuring out <em>What the fuck is this, and how do I properly parse it?</em> I just wished that it had more adoption. As of right now, you need to rely on an library client (that isn’t trivial to minimally reproduce) that, while excellent in itself, is rather large.</p>

<p>Using it is rather simple. You ask the server for the template schema it uses, make a schema of your own that follows that template, and then send the request. It’s done in this way so that the client can verify that the schema that you generate is valid against the schema the server has, so you don’t need to worry about getting invalid data. If it’s wrong, you’ll know it won’t work before you ship it to production.</p>

<h3 id="2-caching">2. Caching</h3>

<p>Implementing a caching function to my small JS code was actually surprisingly easy. Perhaps it was because I was used to JavaScript, or perhaps the documentation was easier to understand. Regardless, I was able to implement a rudamentary form of caching within 10 minutes.</p>

<p>For reference, my plugin actually doesn’t add any javascript at all, nor does it require any. That’s the beauty of this liquid tag–it only generates HTML. However, a side effect of this is that the numbers (forks and stars) that should be dynamic text, are static. Initially a friend offered a quick, easy (and maybe sarcastic) fix: iframes, but I heavily opposed this idea. It went against one of the prime reason to even use this plugin. Instead, I opted to create a script that pulls data from Github’s RESTful API (APIv3). It worked, but with the test page I was using (~27 repos), I quickly reached the rate limit for my IP–3 refreshes, in fact. Caching the data, and only reloading after a certain time, would allow both other repos to be updated and prevent already viewed to waste precious calls.</p>

<h3 id="3-styling">3. Styling</h3>

<p>You might expect styling to be easy, but in a sense, it was quite difficult. Actually, I even had to ask my friendo <a href="https://github.com/Aralisza">Aralisza</a> to help with styling. I had 4 objectives when creating the style hooks and styling the template design:</p>
<ol>
  <li>Design a HTML structure that was easy to modify and style</li>
  <li>Copy the Github style as much as possible</li>
  <li>Not make it ugly.</li>
  <li>Add useful and meaningful links to the repo card</li>
</ol>

<p>(1.) and (2.) were relatively easy to accomplish, and (3.) naturally came from following (2.), but (4.) was difficult. At times, I didn’t know how much would be enough: <em>Should I make every piece of text interactive? Or should I just keep it to the basics?</em> I actually had considered linking the language indicator to the trending repos in that language because it seemed like neat idea but decided against it when I realized it wasn’t helpful to whomever was looking at that card. I also had the idea of making the stars and forks indicators interactive, but that idea quickly ended when I realized that Github’s fork and star buttons weren’t simple GET calls. That might be a feature in the future, but for now, it seems a little beyond what was needed.</p>

<h2 id="what-went-wrong">What went wrong</h2>

<h3 id="1-learning-ruby">1. Learning Ruby</h3>

<p>Man, oh man, learning Ruby was tougher than expected. The way I generally learn a language is to dive deep into a project, and come back out with some understanding of the syntax and kinks the language has. With Ruby, I had expected it to be easy to learn, like Python, since it boasted the ease of use of its language. But then I saw some interesting quirks:</p>
<ol>
  <li><code class="highlighter-rouge">test</code> is a normal variable.</li>
  <li><code class="highlighter-rouge">@test</code> is an instance variable. I understood this as a field in other languages.</li>
  <li><code class="highlighter-rouge">Test</code> must be just another variable, right? Nope, it’s a constant. I believe this is the correct way to style a constant, and not the normal <code class="highlighter-rouge">UPPERCASE</code> other languages use. Okay, that’s a little new, but nothing to get fussy over about.</li>
  <li><code class="highlighter-rouge">@@test</code> is a… instance instance variable? It’s kinda like a pointer to a pointer in C++ right? Nope, class variable. Apparently, it’s a variable that all inherited classes can access as well. I guess this would be nice in some cases, but I don’t think I’ll be using this.</li>
  <li><code class="highlighter-rouge">$test</code> Uh… the only experience I have with variables starting with <code class="highlighter-rouge">$</code> was back in PHP, and everyone hates PHP so I doubt it’d be just a variable. Turns out, it’s a global variable. Why do you need to declare that in a function? Why not just define a variable outside any function or class, and just let that have global scope? What happens if you rely on a <code class="highlighter-rouge">nil</code> global variable? Why does Ruby even encourage usage of the global namespace‽</li>
</ol>

<h3 id="2-graphql-and-ruby">2. GraphQL and Ruby</h3>

<p>Global variables me to my next confusion: GraphQL variables. Remember how GraphQL works? Turns out, you can also define variables in your schema, so that you can use the same schema format for different requests! How intuitive! But guess how those variables are declared in GraphQL? Yup, just like how Ruby declares global variables.</p>

<p>Man, you have no idea how confusing it was to a Ruby newb to see this example code in the <code class="highlighter-rouge">graphql-client</code> docs:</p>
<div class="language-rb highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="no">HeroNameQuery</span> <span class="o">=</span> <span class="no">SWAPI</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">parse</span> <span class="o">&lt;&lt;-</span><span class="no">'GRAPHQL'</span><span class="sh">
  query($id: ID!) {
    hero(id: $id) {
      name
    }
  }
</span><span class="no">GRAPHQL</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>Now, to those familiar to Ruby, you’d realize that everything’s in a String, and that fancy <code class="highlighter-rouge">&lt;&lt;-'GRAPHQL'</code> and <code class="highlighter-rouge">GRAPHQL</code> was just syntatic sugar for a multiline string. But to me and my <del>IDE</del> text-editor, it looked like some sort of escaped text. So I had no idea whether it meant we needed to declare some global Ruby variables or it would interpret using <code class="highlighter-rouge">$id</code> for variables instead.</p>

<p><strong>&lt;aside&gt;</strong> Why does Ruby even have that stupid <code class="highlighter-rouge">&lt;&lt;-'GRAPHQL'</code> sugar anyways? How is that even considered synatatic sugar‽<strong>&lt;/aside&gt;</strong></p>

<p>Once I figured what that meant, the rest was easy to understand. But it took quite a bit of time to figure that out.</p>

<h3 id="3-jekyll-gems-and-testing">3. Jekyll, Gems, and Testing</h3>
<p>I still don’t know how to properly perform unit tests on my code, since when I try to run my code separately from Jekyll, it fails on me (since Jekyll is undefined). Not only that, I still don’t quite understand how to make Gems either. That shouldn’t be too difficult, it’s just I don’t have the time (nor mental fortitude at this point) to figure out. I just wish it didn’t require all this thinking to begin with, but I guess that’s part of my job and not theirs.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I’ve come to realize that I don’t like Ruby. I will probably never touch this language again (unless the stack I work with uses Ruby on Rails), and I will gladly file this project on <em>Things I don’t want to do again</em>. But hey, the result was pretty cool, and I’m not going to lie, I’m pretty proud at the end result. This project was overall a fun project, and the problems that occured weren’t too bad either. It’s just, I don’t like the Ruby ecosystem at all. You win some, you lose some.</p>



            </article>
            </main>
        
     <footer>
 <small>λ(ϰ) is licensed under the <a href="/license.txt">MIT License</a>.</small>
 </footer>

    </body>
</html>
